<div class="register-container main-div">
<h2>Register for Family Calendar</h2>
<form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
  <div>
    <label for="familyName">Family Name: <span class="required-asterisk">*</span></label>
    <input type="text" formControlName="familyName" id="familyName" required>
    <div *ngIf="submitted && (f['familyName']?.errors ?? false)" class="error">
      <div *ngIf="(f['familyName']?.errors?.['required'] ?? false)">Family Name is required</div>
    </div>
  </div>
  <div *ngFor="let member of members; let i = index" class="member-entry">
    <div>
      <label>Member name: <span class="required-asterisk">*</span></label>
      <input type="text" [(ngModel)]="member.memberName" name="memberName-{{i}}" required [ngModelOptions]="{standalone: true}">
    </div>
    <div>
      <label>Username: <span class="required-asterisk">*</span></label>
      <input type="text" [(ngModel)]="member.username" name="username-{{i}}" required [ngModelOptions]="{standalone: true}">
    </div>
    <div>
      <label>Email:</label>
      <input type="email" [(ngModel)]="member.email" name="email-{{i}}" [ngModelOptions]="{standalone: true}">
    </div>
    <div>
      <label>Country</label>
      <select [(ngModel)]="member.country" name="country-{{i}}" class="country-select" [ngModelOptions]="{standalone: true}">
        <option value="">Select country</option>
        <option value="Israel (+972)">Israel (+972)</option>
        <option value="United States (+1)">United States (+1)</option>
        <option value="United Kingdom (+44)">United Kingdom (+44)</option>
        <option value="France (+33)">France (+33)</option>
        <option value="Germany (+49)">Germany (+49)</option>
        <option value="India (+91)">India (+91)</option>
        <option value="Brazil (+55)">Brazil (+55)</option>
        <option value="Russia (+7)">Russia (+7)</option>
        <option value="China (+86)">China (+86)</option>
        <option value="Japan (+81)">Japan (+81)</option>
        <option value="Nepal (+977)">Nepal (+977)</option>
      </select>
    </div>
    <div>
      <label>Phone:</label>
      <input type="tel" [(ngModel)]="member.whatsappNumber" name="whatsappNumber-{{i}}" placeholder="e.g., 0545766580" pattern="^0?\d{8,14}$" [ngModelOptions]="{standalone: true}">
    </div>
    <div>
      <button type="button" (click)="removeMember(i)">Remove</button>
    </div>
  </div>
  <button type="button" (click)="addMember()">+ Add Member</button>
  

<div>
  <button class="fam-btn" type="submit" [disabled]="loading">
    <span *ngIf="loading">Registering...</span>
    <span *ngIf="!loading">Register</span>
  </button>
</div>
  <div *ngIf="error()" class="error-message">{{ error() }}</div>
</form>


  <p>Already have an account? <a [routerLink]="['/login']" class="login-link">Login here</a></p>
<style>
  .login-link {
    cursor: pointer;
  }
  .login-link:hover {
    color: #113d70;
  }
  .error, .error-message {
    color: rgb(198, 35, 35);
  }
</style>
</div>